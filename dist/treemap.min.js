AppController=function(){function r(r,t){return r.sort(function(r,e){return e[t.ValueField]-r[t.ValueField]})}function t(r,t){var e=t.ValueField,n=0;if(!Array.isArray(r))throw"Expecting an array as first argument";for(var i=0;i<r.length;i++)n+=r[i][e];return n}function e(r,t){var e=r*t,n=r,i=t,a=Math.min(i,n),o=a==n;return{Height:r,Width:t,Area:e,RemainingHeight:n,RemainingWidth:i,ShortestSide:a,IsVertical:o}}function n(r){var t=0;if(!Array.isArray(r))throw"Expecting an array as first argument";for(var e=0;e<r.length;e++)t=Math.max(t,i(r[e].height,r[e].width));return t}function i(r,t){return Math.max(r/t,t/r)}function a(r,e,n,i){for(var a=t(r,i)/e,o=[],u=0;u<r.length;u++){var h=a,l=r[u][i.ValueField]/a;o.push({width:n?h:l,height:n?l:h,Color:r[u][i.ColorField],Children:r[u][i.ChildrenField]})}return o}return{SortDataDescending:r,GetRects:a,GetTotalArea:t,GetAspectRatio:n,GetBoxDimensions:e,Worst:i}};
!function(e){function i(i,t,r,d){for(var a=t.Height-t.RemainingHeight,l=t.Width-t.RemainingWidth,h=d.ChildrenField,c=0;c<i.length;c++){i[c].Color?currentColor=i[c].Color:(currentColor=o[0],o.unshift(o.pop()));var s=e("<div/>").css({border:d.Border,position:"absolute","background-color":currentColor,top:a,left:l,height:i[c].height,width:i[c].width}).addClass("treemap-node").appendTo(r);t.IsVertical?a+=i[c].height:l+=i[c].width,i[c][h]&&n.call(e(s),i[c][h],d)}t.IsVertical?t.RemainingWidth-=i[0].width:t.RemainingHeight-=i[0].height,t.ShortestSide=Math.min(t.RemainingWidth,t.RemainingHeight),t.IsVertical=t.ShortestSide==t.RemainingHeight,r.closest("div").css("border-width","0px")}function t(e,n,o,d){var a=0,l=void 0,h=void 0,c=[],s=[];if(0!==n.length){for(;a<n.length&&(void 0===l||h<l);){l=h,c=s,a+=1;var g=n.slice(0,a);s=r.GetRects(g,e.ShortestSide,e.IsVertical,d),h=r.GetAspectRatio(s)}0===c.length&&(c=s),i(c,e,o,d),shortestSide=Math.min(e.RemainingHeight,e.RemainingWidth),t(e,n.slice(c.length),o,d)}}function n(i,n){var o=e(this),d=e.extend({},e.fn.treemap.defaults,n),a=r.GetBoxDimensions(o.height(),o.width()),l=d.ValueField,h=[],c=0;i&&(c=r.GetTotalArea(i,d),i=r.SortDataDescending(i,d),h=e.map(i,function(e,i){var t=e[l]/c,n=a.Area*t,r=d.ChildrenField;return{Value:n,Color:e.Color,Children:e[r]}}),t(a,h,o,d))}var r=new window.AppController,o=["#71afd8","#9ed86c","#fcad4d","#aa8cd6","#f0ec6d","#347097","#74ab45","#e89126","#795ca4","#ffc703","#abd3ee","#fccc91","#c5f19f","#dac9f3","#fbf6b1"];e.fn.treemap=n,e.fn.treemap.defaults={ValueField:"Value",ColorField:"Color",ChildrenField:"Children",Border:"1px solid #000"}}(jQuery);